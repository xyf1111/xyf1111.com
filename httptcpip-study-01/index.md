# Httptcpip Study 01

<!--more-->
## osi七层参考模型
!["osi七层模型"](/images/osi1.png "osi七层模型")
## TCP/IP五层模型
!["TCP/IP五层模型"](/images/tcpip1.png "TCP/IP五层模型")
应用层的主要协议有：http、smtp、ssh协议

传输控制层的主要协议有：tcp、udp协议
- tcp协议面向连接，能正确处理丢包，传输顺序错乱的问题，但是为了建立和断开连接，需要至少7次收发包，资源浪费
- udp协议面向无连接，不管对方有没有收到，如果要得到通知，需要通过应用层
网络层的主要协议有：ip协议
## TCP三次握手
- 客户端发送带有SYN标志的数据包到服务端。一次握手
- 服务端发送带有SYN/ACK标志的数据包到客户端。二次握手
- 客户端发送带有ACK标志的数据包到服务端。三次握手
## TCP四次挥手
- 客户端发送一个FIN，用来关闭客户端到服务端的数据传输
- 服务端收到FIN，发回ACK确认
- 服务端关闭与客户端的连接，发送FIN到客户端
- 客户端发回ACK确认
## HTTP
HTTP协议是建立在TCP协议基础上的，当浏览器需要从服务器获取网页数据的时候，会发出一次HTTP请求。HTTP会通过TCP建立一个到服务器的连接通道，当本次请求需要的数据完毕后，HTTP会立即与TCP断开连接，这个过程是很短的。所以HTTP连接是一种短连接，是一种无状态连接。

这个所谓的无状态，是指浏览器每次向服务器发起请求时，不是通过一个连接，而是每次都建立一个新的连接。如果是一个连接的话，服务进程中就能保持住这个连接并且在内存中记住一些信息状态。而每次请求结束后，连接就关闭了，相关内容就释放了，所以记不住任何状态，成为无状态连接。
## HTTP英文全称
超文本传输协议
## 状态码
2xx 成功
- 200 ok，表示从客户端发来的请求在服务端被正确处理
- 204 No Content，表示请求成功，但响应报文不含实体的主体部分
- 206 Partial Content，进行范围请求

3xx 重定向
- 301 moved permanently，永久性重定向，表示资源已被分配了新的URL
- 302 found，临时性重定向，表示资源临时被分配了新的URL
- 303 see other，表示资源存在另一个URL，应使用GET方法定向获取资源
- 304 not modified，表示服务器允许访问资源，但因发生请求未满足条件的情况
- 307 temporary redirect，临时重定向，和302含义相同

4xx 客户端错误
- 400 bad request，请求报文存在语法错误
- 401 unauthorized，表示发送的请求需要有通过HTTP认证的认证信息
- 403 forbidden，表示对请求资源的访问被服务器拒绝
- 404 not found，表示服务器上没有找到对应资源

5xx 服务器错误
- 500 internal server error，表示服务器端执行请求时发生错误
- 503 service unavailable，表示服务器暂时处于超负载或正在停机维护，无法处理请求
## HTTP的报文结构
1. HTTP请求报文
- 请求行
- 请求头
- 空行
- 请求数据
2. HTTP响应报文
- 状态行
- 消息报头
- 响应正文
## TCP和UDP的区别
- TCP：面向连接，可靠，速度慢，效率低
- UDP：无连接，不可靠，速度快，效率高

当进程需要传输可靠的数据时应使用TCP，当进程需要高效传输数据，可以忽略可靠性时应使用UDP

TCP如何保证可靠性：
- 数据包校验
- 超时重传机制
- 应答机制
- 对失序数据包重排序
- TCP还能提供流量控制
## HTTP和HTTPS有什么区别
HTTP协议传输的数据都是未加密的，也就是明文的，因此使用HTTP协议传输隐私信息非常不安全。为了保证这些隐私信息能加密传输，于是网景公司设计了SSL(Secure Socket Layer)协议用于对HTTP协议传输的数据加密，从而也就诞生了HTTPS。

简单来说，HTTPS协议是由SSL+HTTP协议构建的可进行加密传输、身份认证的网络协议，要比HTTP安全

HTTPS和HTTP的区别主要如下：
- HTTPS协议需要到CA申请证书，一般免费证书比较少，因而需要一定费用
- HTTP是超文本传输协议，信息是明文传输，HTTPS则是具有安全性的SSL加密传输协议
- HTTP和HTTPS使用的是完全不同的连接方式，用的端口也不一样，HTTP是80，HTTPS是443
- HTTP的连接很简单，是无状态的，HTTPS协议是由SSL+HTTP协议构建的可进行加密传输，身份认证的网络协议，比HTTP协议安全
## HTTP1.0和HTTP1.1的区别
- HTTP1.0中浏览器与服务器只保持短暂连接，浏览器的每次请求都与服务器建立一个TCP连接，服务器完成请求后立即断开TCP连接，服务器不跟踪每个客户也不记录过去请求
- HTTP1.1提供永久性连接(即1.0非持久连接，HTTP1.0没有host字段)
- HTTP1.1中添加了HOST请求头字段后，实现了一台WEB服务器上可以在同一个IP地址和端口上使用不同的主机名来创建多个虚拟WEB站点
- HTTP1.1提供身份认证
